DROP TABLE TB_ADMIN CASCADE CONSTRAINTS;
DROP TABLE TB_USER  CASCADE CONSTRAINTS;
DROP TABLE TB_QNA CASCADE CONSTRAINTS;
DROP TABLE TB_NOTICE CASCADE CONSTRAINTS;
DROP TABLE TB_POPUP CASCADE CONSTRAINTS;
DROP TABLE TB_FAQ CASCADE CONSTRAINTS;
DROP TABLE TB_SEMESTER CASCADE CONSTRAINTS;
DROP TABLE TB_PERMISSION CASCADE CONSTRAINTS;
DROP TABLE TB_BOOK CASCADE CONSTRAINTS;
DROP TABLE TB_CHAPTER CASCADE CONSTRAINTS;
DROP TABLE TB_QUESTION CASCADE CONSTRAINTS;
DROP TABLE TB_COURSE CASCADE CONSTRAINTS;

DROP SEQUENCE SQ_FAQNO;
DROP SEQUENCE SQ_NOTINO;
DROP SEQUENCE SQ_POPUPNO;
DROP SEQUENCE SQ_QNANO;
DROP SEQUENCE SQ_SEMNO;
DROP SEQUENCE SQ_BKNO;
DROP SEQUENCE SQ_CHNO;
DROP SEQUENCE SQ_CONO;

CREATE TABLE TB_ADMIN(
    ADMIN_ID VARCHAR2(50),
    ADMIN_PWD VARCHAR2(20) CONSTRAINT NN_AMPWD NOT NULL,
    ADMIN_NAME VARCHAR2(20) CONSTRAINT NN_AMNAME NOT NULL
);
ALTER TABLE TB_ADMIN
ADD CONSTRAINT PK_AMID PRIMARY KEY (ADMIN_ID);

COMMENT ON COLUMN TB_ADMIN.ADMIN_ID IS '관리자아이디';
COMMENT ON COLUMN TB_ADMIN.ADMIN_PWD IS '관리자비밀번호';
COMMENT ON COLUMN TB_ADMIN.ADMIN_NAME IS '관리자이름';

INSERT INTO TB_ADMIN
VALUES ('admin01','admin01','관리자1');
INSERT INTO TB_ADMIN
VALUES ('admin02','admin02','관리자2');
INSERT INTO TB_ADMIN
VALUES ('admin03','admin03','관리자3');
INSERT INTO TB_ADMIN
VALUES ('admin04','admin04','관리자4');
INSERT INTO TB_ADMIN
VALUES ('admin05','admin05','관리자5');

CREATE TABLE TB_USER(
    USER_ID VARCHAR2(50),
    USER_PWD VARCHAR2(20) CONSTRAINT NN_UPWD NOT NULL,
    USER_NAME VARCHAR2(20) CONSTRAINT NN_UNAME NOT NULL,
    PHONE VARCHAR2(14) CONSTRAINT NN_PHONE NOT NULL,
    REGIST_DATE DATE DEFAULT SYSDATE CONSTRAINT NN_RGDATE NOT NULL,
    LASTMODIFIED DATE DEFAULT SYSDATE,
    MEMBER_LEVEL CHAR(1) DEFAULT '0'
);
ALTER TABLE TB_USER
ADD CONSTRAINT PK_UID PRIMARY KEY (USER_ID);
ALTER TABLE TB_USER
ADD CONSTRAINT CK_MLEVEL CHECK (MEMBER_LEVEL IN ('0','1'));

COMMENT ON COLUMN TB_USER.USER_ID IS '유저이메일아이디';
COMMENT ON COLUMN TB_USER.USER_PWD IS '패스워드';
COMMENT ON COLUMN TB_USER.USER_NAME IS '이름';
COMMENT ON COLUMN TB_USER.PHONE IS '핸드폰번호';
COMMENT ON COLUMN TB_USER.REGIST_DATE IS '가입일';
COMMENT ON COLUMN TB_USER.LASTMODIFIED IS '마지막수정일';
COMMENT ON COLUMN TB_USER.MEMBER_LEVEL IS '회원등급';

INSERT INTO TB_USER
VALUES ('ysy4139@gmail.com','pass01','윤선용','01025306563',DEFAULT,DEFAULT,DEFAULT);
INSERT INTO TB_USER
VALUES ('dlvkvk2000@gmail.com','pass02','이하늘','01099590214',DEFAULT,DEFAULT,DEFAULT);
INSERT INTO TB_USER
VALUES ('tomoh88.wiki@gmail.com','pass03','김지훈','01097672467',DEFAULT,DEFAULT,DEFAULT);
INSERT INTO TB_USER
VALUES ('aftersay3@gmail.com','pass04','이재경','01011111111',DEFAULT,DEFAULT,DEFAULT);
INSERT INTO TB_USER
VALUES ('yswpg1204@naver.com','pass05','하종은','01074488459',DEFAULT,DEFAULT,DEFAULT);
INSERT INTO TB_USER
VALUES ('drumhyo@hanmail.net','pass06','황효승','01022222222',DEFAULT,DEFAULT,DEFAULT);

CREATE TABLE TB_QNA(
    QNA_NO NUMBER,
    QNA_TITLE VARCHAR2(100) CONSTRAINT NN_QTITLE NOT NULL,
    QNA_CONTENT VARCHAR2(1000),
    QNA_DATE DATE DEFAULT SYSDATE CONSTRAINT NN_QDATE NOT NULL,
    ORIGINAL_QNAME VARCHAR2(100),
    RENAME_QNAME VARCHAR2(100),
    PARENT_NO NUMBER DEFAULT 0,
    ANSWER_REF NUMBER DEFAULT 0,
    QNA_LEVEL NUMBER DEFAULT 0,
    QNA_INDEX NUMBER DEFAULT 0,
    QNA_STATUS CHAR(1) DEFAULT 'N',
    QNA_WRITER VARCHAR2(50) CONSTRAINT NN_QWRTIER NOT NULL
);  
ALTER TABLE TB_QNA
ADD CONSTRAINT PK_QNO PRIMARY KEY (QNA_NO);
ALTER TABLE TB_QNA
ADD CONSTRAINT CK_QSTATUS CHECK (QNA_STATUS IN ('N','Y'));

COMMENT ON COLUMN TB_QNA.QNA_NO IS '게시글번호';
COMMENT ON COLUMN TB_QNA.QNA_TITLE IS '게시글제목';
COMMENT ON COLUMN TB_QNA.QNA_CONTENT IS '게시글내용';
COMMENT ON COLUMN TB_QNA.QNA_DATE IS '게시일';
COMMENT ON COLUMN TB_QNA.ORIGINAL_QNAME IS '원본첨부파일명';
COMMENT ON COLUMN TB_QNA.RENAME_QNAME IS '바뀐첨부파일명';
COMMENT ON COLUMN TB_QNA.PARENT_NO IS '원글 게시글 번호';
COMMENT ON COLUMN TB_QNA.ANSWER_REF IS '참조답글번호';
COMMENT ON COLUMN TB_QNA.QNA_LEVEL IS '글 레벨';
COMMENT ON COLUMN TB_QNA.QNA_INDEX IS '답글순번';
COMMENT ON COLUMN TB_QNA.QNA_STATUS IS '답변상태';
COMMENT ON COLUMN TB_QNA.QNA_WRITER IS '작성자';

CREATE SEQUENCE SQ_QNANO
START WITH 1
INCREMENT BY 1
NOCYCLE NOCACHE;

INSERT INTO TB_QNA
VALUES (SQ_QNANO.NEXTVAL,'1번 글입니다','1번은 뭔가요?',DEFAULT,null,null,SQ_QNANO.CURRVAL,DEFAULT,DEFAULT,DEFAULT,DEFAULT,'ysy4139@gmail.com');
INSERT INTO TB_QNA
VALUES (SQ_QNANO.NEXTVAL,'2번 글입니다','2번은 뭔가요?',DEFAULT,null,null,SQ_QNANO.CURRVAL,DEFAULT,DEFAULT,DEFAULT,DEFAULT,'tomoh88.wiki@gmail.com');
INSERT INTO TB_QNA
VALUES (SQ_QNANO.NEXTVAL,'3번 글입니다','3번은 뭔가요?',DEFAULT,null,null,SQ_QNANO.CURRVAL,DEFAULT,DEFAULT,DEFAULT,DEFAULT,'dlvkvk2000@gmail.com');
INSERT INTO TB_QNA
VALUES (SQ_QNANO.NEXTVAL,'4번 글입니다','4번은 뭔가요?',DEFAULT,null,null,SQ_QNANO.CURRVAL,DEFAULT,DEFAULT,DEFAULT,DEFAULT,'dlvkvk2000@gmail.com');
INSERT INTO TB_QNA
VALUES (SQ_QNANO.NEXTVAL,'5번 글입니다','5번은 뭔가요?',DEFAULT,null,null,SQ_QNANO.CURRVAL,DEFAULT,DEFAULT,DEFAULT,DEFAULT,'dlvkvk2000@gmail.com');
INSERT INTO TB_QNA
VALUES (SQ_QNANO.NEXTVAL,'6번 글입니다','6번은 뭔가요?',DEFAULT,null,null,SQ_QNANO.CURRVAL,DEFAULT,DEFAULT,DEFAULT,DEFAULT,'dlvkvk2000@gmail.com');
INSERT INTO TB_QNA
VALUES (SQ_QNANO.NEXTVAL,'7번 글입니다','7번은 뭔가요?',DEFAULT,null,null,SQ_QNANO.CURRVAL,DEFAULT,DEFAULT,DEFAULT,DEFAULT,'dlvkvk2000@gmail.com');
INSERT INTO TB_QNA
VALUES (SQ_QNANO.NEXTVAL,'8번 글입니다','8번은 뭔가요?',DEFAULT,null,null,SQ_QNANO.CURRVAL,DEFAULT,DEFAULT,DEFAULT,DEFAULT,'dlvkvk2000@gmail.com');
INSERT INTO TB_QNA
VALUES (SQ_QNANO.NEXTVAL,'9번 글입니다','9번은 뭔가요?',DEFAULT,null,null,SQ_QNANO.CURRVAL,DEFAULT,DEFAULT,DEFAULT,DEFAULT,'dlvkvk2000@gmail.com');
INSERT INTO TB_QNA
VALUES (SQ_QNANO.NEXTVAL,'99번 글입니다','99번은 뭔가요?',DEFAULT,null,null,SQ_QNANO.CURRVAL,DEFAULT,DEFAULT,DEFAULT,DEFAULT,'dlvkvk2000@gmail.com');

CREATE TABLE TB_NOTICE(
    NOTICE_NO NUMBER,
    NOTICE_TITLE VARCHAR2(100) CONSTRAINT NN_NOTITLE NOT NULL,
    NOTICE_CONTENT VARCHAR2(1000) CONSTRAINT NN_NOCONTENT NOT NULL,
    NOTICE_DATE DATE DEFAULT SYSDATE CONSTRAINT NN_NODATE NOT NULL,
    NOTICE_COUNT NUMBER DEFAULT 0 CONSTRAINT NN_NOCOUNT NOT NULL,
    ORIGINAL_FILENAME VARCHAR2(100),
    RENAME_FILENAME VARCHAR2(100),
    WRITER_NAME VARCHAR2(50)
);
ALTER TABLE TB_NOTICE
ADD CONSTRAINT PK_NOTICENO PRIMARY KEY (NOTICE_NO);
ALTER TABLE TB_NOTICE
ADD CONSTRAINT FK_WRNAME FOREIGN KEY (WRITER_NAME) REFERENCES TB_ADMIN (ADMIN_ID);

COMMENT ON COLUMN TB_NOTICE.NOTICE_NO IS '게시글번호';
COMMENT ON COLUMN TB_NOTICE.NOTICE_TITLE IS '게시글제목';
COMMENT ON COLUMN TB_NOTICE.NOTICE_CONTENT IS '게시글내용';
COMMENT ON COLUMN TB_NOTICE.NOTICE_DATE IS '게시일';
COMMENT ON COLUMN TB_NOTICE.NOTICE_COUNT IS '조회수';
COMMENT ON COLUMN TB_NOTICE.ORIGINAL_FILENAME IS '원본첨부파일명';
COMMENT ON COLUMN TB_NOTICE.RENAME_FILENAME IS '바뀐첨부파일명';
COMMENT ON COLUMN TB_NOTICE.WRITER_NAME IS '작성자';

CREATE SEQUENCE SQ_NOTINO
START WITH 1
INCREMENT BY 1
NOCYCLE NOCACHE;

INSERT INTO TB_NOTICE
VALUES (SQ_NOTINO.NEXTVAL, '첫번째점검', '오늘 점검이 있으니 홈페이지 사용은 자제해주세요.1', DEFAULT, 0,null,null, 'admin01');
INSERT INTO TB_NOTICE
VALUES (SQ_NOTINO.NEXTVAL,'두번째점검','오늘 점검이 있으니 홈페이지 사용은 자제해주세요.2', DEFAULT, 0,null,null, 'admin02');
INSERT INTO TB_NOTICE
VALUES (SQ_NOTINO.NEXTVAL, '세번째점검', '오늘 점검이 있으니 홈페이지 사용은 자제해주세요.3', DEFAULT, 0,null,null, 'admin03');
INSERT INTO TB_NOTICE
VALUES (SQ_NOTINO.NEXTVAL, '네번째점검', '오늘 점검이 있으니 홈페이지 사용은 자제해주세요.4', DEFAULT, 0,null,null, 'admin03');
INSERT INTO TB_NOTICE
VALUES (SQ_NOTINO.NEXTVAL, '다섯번째점검', '오늘 점검이 있으니 홈페이지 사용은 자제해주세요.5', DEFAULT, 0,null,null, 'admin04');
INSERT INTO TB_NOTICE
VALUES (SQ_NOTINO.NEXTVAL, 'asd', 'aaa', DEFAULT, 0,null,null, 'admin03');
INSERT INTO TB_NOTICE
VALUES (SQ_NOTINO.NEXTVAL, 'qwe', 'bbb', DEFAULT, 0,null,null, 'admin04');
commit;
CREATE TABLE TB_POPUP(
    POPUP_NO NUMBER,
    POPUP_NAME VARCHAR2(100) CONSTRAINT NN_POPNAME NOT NULL,
    POPUP_LINK VARCHAR2(200) CONSTRAINT NN_POPLINK NOT NULL,
    POPUP_DATE DATE DEFAULT SYSDATE CONSTRAINT NN_POPDATE NOT NULL,
    POPUP_ENDDATE DATE DEFAULT SYSDATE CONSTRAINT NN_POPENDDATE NOT NULL,
    POPUP_IMAGEPATH VARCHAR2(200),
    POPUP_EXPLAN VARCHAR2(300) CONSTRAINT NN_POPEXPLAN NOT NULL,
    ADMIN_ID VARCHAR2(50)
);
ALTER TABLE TB_POPUP
ADD CONSTRAINT PK_POPNO PRIMARY KEY (POPUP_NO);
ALTER TABLE TB_POPUP
ADD FOREIGN KEY (ADMIN_ID) REFERENCES TB_ADMIN (ADMIN_ID);

COMMENT ON COLUMN TB_POPUP.POPUP_NO IS '팝업번호';
COMMENT ON COLUMN TB_POPUP.POPUP_NAME IS '팝업제목';
COMMENT ON COLUMN TB_POPUP.POPUP_LINK IS '팝업창링크주소';
COMMENT ON COLUMN TB_POPUP.POPUP_DATE IS '팝업창 게시일';
COMMENT ON COLUMN TB_POPUP.POPUP_ENDDATE IS '팝업창 종료일';
COMMENT ON COLUMN TB_POPUP.POPUP_IMAGEPATH IS '팝업이미지주소';
COMMENT ON COLUMN TB_POPUP.POPUP_EXPLAN IS '팝업 설명';
COMMENT ON COLUMN TB_POPUP.ADMIN_ID IS '관리자 아이디';

CREATE SEQUENCE SQ_POPUPNO
START WITH 1
INCREMENT BY 1
NOCYCLE NOCACHE;

INSERT INTO TB_POPUP 
VALUES (SQ_POPUPNO.NEXTVAL,'팝업1','www.naver.com',default, '19/03/12', null,'팝업1창입니다.','admin01');
INSERT INTO TB_POPUP 
VALUES (SQ_POPUPNO.NEXTVAL,'팝업2','www.google.com',default, '19/03/15', null,'팝업2창입니다.','admin02');
INSERT INTO TB_POPUP 
VALUES (SQ_POPUPNO.NEXTVAL,'팝업3','www.daum.net',default, '19/03/22', null,'팝업3창입니다.','admin01');

CREATE TABLE TB_FAQ(
    FAQ_NO NUMBER,
    QUESTION_CONTENT VARCHAR2(1000) CONSTRAINT NN_QCONTENT NOT NULL,
    ANSWER_CONTENT VARCHAR2(1000) CONSTRAINT NN_ACONTENT NOT NULL,
    FAQ_DATE DATE DEFAULT SYSDATE CONSTRAINT NN_FDATE NOT NULL,
    ADMIN_ID VARCHAR2(50)
);
ALTER TABLE TB_FAQ
ADD CONSTRAINT PK_FAQNO PRIMARY KEY (FAQ_NO);
ALTER TABLE TB_FAQ
ADD FOREIGN KEY (ADMIN_ID) REFERENCES TB_ADMIN (ADMIN_ID);

COMMENT ON COLUMN TB_FAQ.FAQ_NO IS 'FAQ번호';
COMMENT ON COLUMN TB_FAQ.QUESTION_CONTENT IS '질문';
COMMENT ON COLUMN TB_FAQ.ANSWER_CONTENT IS '답변';
COMMENT ON COLUMN TB_FAQ.FAQ_DATE IS 'FAQ게시일';
COMMENT ON COLUMN TB_FAQ.ADMIN_ID IS '관리자아이디';

CREATE SEQUENCE SQ_FAQNO
START WITH 1
INCREMENT BY 1
NOCYCLE NOCACHE;

INSERT INTO TB_FAQ
VALUES (SQ_FAQNO.NEXTVAL, '무슨 홈페이지인가요?', '수학사이트입니다.',DEFAULT, 'admin01');
INSERT INTO TB_FAQ
VALUES (SQ_FAQNO.NEXTVAL, '자주 묻는 질문2', '그에 대한 답변1',DEFAULT, 'admin01');
INSERT INTO TB_FAQ
VALUES (SQ_FAQNO.NEXTVAL, '자주 묻는 질문3', '그에 대한 답변1',DEFAULT, 'admin01');

CREATE TABLE TB_SEMESTER (
    SEMESTER_NO NUMBER,
    SEMESTER_NAME VARCHAR2(30)
);
ALTER TABLE TB_SEMESTER
ADD CONSTRAINT PK_PERNO PRIMARY KEY (SEMESTER_NO);

COMMENT ON COLUMN TB_SEMESTER.SEMESTER_NO IS '학기번호';
COMMENT ON COLUMN TB_SEMESTER.SEMESTER_NAME IS '학기명';

CREATE SEQUENCE SQ_SEMNO
START WITH 1
INCREMENT BY 1
NOCACHE NOCYCLE;

INSERT INTO TB_SEMESTER 
VALUES (SQ_SEMNO.NEXTVAL, '중1-1');
INSERT INTO TB_SEMESTER 
VALUES (SQ_SEMNO.NEXTVAL, '중1-2');
INSERT INTO TB_SEMESTER 
VALUES (SQ_SEMNO.NEXTVAL, '중2-1');
INSERT INTO TB_SEMESTER 
VALUES (SQ_SEMNO.NEXTVAL, '중2-2');
INSERT INTO TB_SEMESTER 
VALUES (SQ_SEMNO.NEXTVAL, '중3-1');
INSERT INTO TB_SEMESTER 
VALUES (SQ_SEMNO.NEXTVAL, '중3-2');
INSERT INTO TB_SEMESTER 
VALUES (SQ_SEMNO.NEXTVAL, '고1-1');
INSERT INTO TB_SEMESTER 
VALUES (SQ_SEMNO.NEXTVAL, '고1-2');
INSERT INTO TB_SEMESTER 
VALUES (SQ_SEMNO.NEXTVAL, '고2-1');
INSERT INTO TB_SEMESTER 
VALUES (SQ_SEMNO.NEXTVAL, '고2-2');
INSERT INTO TB_SEMESTER 
VALUES (SQ_SEMNO.NEXTVAL, '고3-1');
INSERT INTO TB_SEMESTER 
VALUES (SQ_SEMNO.NEXTVAL, '고3-2');

CREATE TABLE TB_PERMISSION(
    SEMESTER_NO NUMBER,
    USER_ID VARCHAR2(50) NOT NULL
);
ALTER TABLE TB_PERMISSION
ADD CONSTRAINT FK_SEMNO FOREIGN KEY (SEMESTER_NO) REFERENCES TB_SEMESTER(SEMESTER_NO);
ALTER TABLE TB_PERMISSION
ADD FOREIGN KEY (USER_ID) REFERENCES TB_USER(USER_ID);
ALTER TABLE TB_PERMISSION
ADD CONSTRAINT UQ_SUNO UNIQUE (SEMESTER_NO, USER_ID);

COMMENT ON COLUMN TB_PERMISSION.SEMESTER_NO IS '학기번호';
COMMENT ON COLUMN TB_PERMISSION.USER_ID IS '유저이메일아이디';

INSERT INTO TB_PERMISSION
VALUES (1,'dlvkvk2000@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (2,'dlvkvk2000@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (3,'dlvkvk2000@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (4,'dlvkvk2000@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (5,'dlvkvk2000@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (6,'dlvkvk2000@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (7,'dlvkvk2000@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (8,'dlvkvk2000@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (9,'dlvkvk2000@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (10,'dlvkvk2000@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (11,'dlvkvk2000@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (12,'dlvkvk2000@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (1,'tomoh88.wiki@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (2,'tomoh88.wiki@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (3,'tomoh88.wiki@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (4,'tomoh88.wiki@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (5,'tomoh88.wiki@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (6,'tomoh88.wiki@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (7,'tomoh88.wiki@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (8,'tomoh88.wiki@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (9,'tomoh88.wiki@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (10,'tomoh88.wiki@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (11,'tomoh88.wiki@gmail.com');
INSERT INTO TB_PERMISSION
VALUES (12,'tomoh88.wiki@gmail.com');

CREATE TABLE TB_BOOK (
    BOOK_NO NUMBER,
    SEMESTER_NO NUMBER,
    BOOK_NAME VARCHAR2(30) CONSTRAINT NN_BNAME NOT NULL
);
ALTER TABLE TB_BOOK
ADD CONSTRAINT PK_BSNO PRIMARY KEY (BOOK_NO, SEMESTER_NO);
ALTER TABLE TB_BOOK
ADD FOREIGN KEY (SEMESTER_NO) REFERENCES TB_SEMESTER(SEMESTER_NO);

COMMENT ON COLUMN TB_BOOK.BOOK_NO IS '교재번호';
COMMENT ON COLUMN TB_BOOK.SEMESTER_NO IS '학기번호';
COMMENT ON COLUMN TB_BOOK.BOOK_NAME IS '교재명';

CREATE SEQUENCE SQ_BKNO
START WITH 1
INCREMENT BY 1
NOCYCLE NOCACHE;

INSERT INTO TB_BOOK
VALUES (SQ_BKNO.NEXTVAL, 1, '약한수학');
INSERT INTO TB_BOOK
VALUES (SQ_BKNO.NEXTVAL, 1, '중간수학');
INSERT INTO TB_BOOK
VALUES (SQ_BKNO.NEXTVAL, 1, '강한수학');
INSERT INTO TB_BOOK
VALUES (SQ_BKNO.NEXTVAL, 2, '약한수학');
INSERT INTO TB_BOOK
VALUES (SQ_BKNO.NEXTVAL, 2, '중간수학');
INSERT INTO TB_BOOK
VALUES (SQ_BKNO.NEXTVAL, 2, '강한수학');
INSERT INTO TB_BOOK
VALUES (SQ_BKNO.NEXTVAL, 3, '약한수학');
INSERT INTO TB_BOOK
VALUES (SQ_BKNO.NEXTVAL, 3, '중간수학');
INSERT INTO TB_BOOK
VALUES (SQ_BKNO.NEXTVAL, 3, '강한수학');



CREATE TABLE TB_CHAPTER (
    CHAPTER_NO NUMBER,
    BOOK_NO NUMBER,
    SEMESTER_NO NUMBER,
    CHAPTER_NAME VARCHAR2(30) CONSTRAINT NN_CHNAME NOT NULL
);
ALTER TABLE TB_CHAPTER
ADD CONSTRAINT PK_CBSNO PRIMARY KEY (CHAPTER_NO, BOOK_NO, SEMESTER_NO);
ALTER TABLE TB_CHAPTER
ADD CONSTRAINT FK_BSNO FOREIGN KEY (BOOK_NO, SEMESTER_NO) REFERENCES TB_BOOK(BOOK_NO, SEMESTER_NO);

COMMENT ON COLUMN TB_CHAPTER.CHAPTER_NO IS '챕터번호';
COMMENT ON COLUMN TB_CHAPTER.BOOK_NO IS '교재번호';
COMMENT ON COLUMN TB_CHAPTER.SEMESTER_NO IS '학기번호';
COMMENT ON COLUMN TB_CHAPTER.CHAPTER_NAME IS '챕터명';

CREATE SEQUENCE SQ_CHNO
START WITH 1
INCREMENT BY 1
NOCYCLE NOCACHE;

CREATE TABLE TB_QUESTION (
    QUESTION_IMG VARCHAR2(200),
    CHAPTER_NO NUMBER,
    BOOK_NO NUMBER,
    SEMESTER_NO NUMBER
);
ALTER TABLE TB_QUESTION
ADD CONSTRAINT PK_QCBSNO PRIMARY KEY (QUESTION_IMG, CHAPTER_NO, BOOK_NO, SEMESTER_NO);
ALTER TABLE TB_QUESTION
ADD CONSTRAINT FK_QCBSNO FOREIGN KEY (CHAPTER_NO, BOOK_NO, SEMESTER_NO) REFERENCES TB_CHAPTER(CHAPTER_NO, BOOK_NO, SEMESTER_NO);

COMMENT ON COLUMN TB_QUESTION.QUESTION_IMG IS '문제이미지명';
COMMENT ON COLUMN TB_QUESTION.CHAPTER_NO IS '챕터번호';
COMMENT ON COLUMN TB_QUESTION.BOOK_NO IS '교재번호';
COMMENT ON COLUMN TB_QUESTION.SEMESTER_NO IS '학기번호';

CREATE TABLE TB_COURSE(
    COURSE_NO NUMBER,
    COURSE_TITLE VARCHAR2(100) CONSTRAINT NN_CONO NOT NULL,
    COURSE_CONTENT VARCHAR2(1000),
    COURSE_DATE DATE DEFAULT SYSDATE CONSTRAINT NN_CODATE NOT NULL,
    BOOK_NO NUMBER,
    SEMESTER_NO NUMBER
);
ALTER TABLE TB_COURSE
ADD CONSTRAINT FK_CONO PRIMARY KEY (COURSE_NO);
ALTER TABLE TB_COURSE
ADD FOREIGN KEY (BOOK_NO, SEMESTER_NO) REFERENCES TB_BOOK(BOOK_NO, SEMESTER_NO);

COMMENT ON COLUMN TB_COURSE.COURSE_NO IS '게시글번호';
COMMENT ON COLUMN TB_COURSE.COURSE_TITLE IS '게시글제목';
COMMENT ON COLUMN TB_COURSE.COURSE_CONTENT IS '게시글내용';
COMMENT ON COLUMN TB_COURSE.COURSE_DATE IS '작성일';

CREATE SEQUENCE SQ_CONO
START WITH 1
INCREMENT BY 1
NOCYCLE NOCACHE;

INSERT INTO TB_COURSE
VALUES (SQ_CONO.NEXTVAL, '중1-1 집합1 강의',NULL, DEFAULT,1,1);
INSERT INTO TB_COURSE
VALUES (SQ_CONO.NEXTVAL, '중1-1 집합2 강의',NULL, DEFAULT,1, 1);
INSERT INTO TB_COURSE
VALUES (SQ_CONO.NEXTVAL, '중1-1 집합3 강의',NULL, DEFAULT,1, 1);
INSERT INTO TB_COURSE
VALUES (SQ_CONO.NEXTVAL, '중1-1 집합4 강의',NULL, DEFAULT,1, 1);
INSERT INTO TB_COURSE
VALUES (SQ_CONO.NEXTVAL, '중1-1 집합5 강의',NULL, DEFAULT,1, 1);
INSERT INTO TB_COURSE
VALUES (SQ_CONO.NEXTVAL, '1-2학기 강의',NULL, DEFAULT,2, 1);
INSERT INTO TB_COURSE
VALUES (SQ_CONO.NEXTVAL, '2-1학기 강의',NULL, DEFAULT,3, 1);
INSERT INTO TB_COURSE
VALUES (SQ_CONO.NEXTVAL, '2-2학기 강의',NULL, DEFAULT,4, 2);

COMMIT;